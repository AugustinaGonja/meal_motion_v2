{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block content %}
<main class="py-4 success-wrapper">
    <div class="container success-box">
        <div class="row gy-1">
            <div class="text-center">
                <i class="fa-solid fa-circle-check check-icon text-success "></i>
                <h3 class="text-uppercase mt-2">Thank you for your purchase !</h3>
                <p class="text-muted">Your order is being processed and you will recieve a confirmation message at <strong>{{order.email}}.</strong>
                    <br>Your order number is <strong>{{ order.order_number }}</strong>
                </p>
            </div>
            <!--Return To Home-->
            <div class="text-center my-2">
                <a href="{% url 'home' %}" class="btn rounded-1 def-btn mb-2">
                    <i class="fa-solid fa-chevron-left me-2 "></i>Back to Home</a>
            </div>
            <div class="card-wrapper">
            <!--Order Summary -->
            <div class="card p-4 shadow-sm rounded-2 mb-4">
                <!--Order Info-->
                <p class="text-muted">Order Info :</p>
                <div class="row">
                    <div class="col-4">
                        <p><strong>Order Number</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.order_number }}</p>
                    </div>
                    <div class="col-4">
                        <p><strong>Order Date</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.date}}</p>
                    </div>
                </div>
                <hr>
                <p class="text-muted">Order Details :</p>
                {% for item in order.lineitems.all %}
                <div class="row"> 
                    <div class="col"> 
                        <p>{{item.product.name}}</p>
                    </div>
                    <div class="col text-end text-muted">
                        <p>{{item.quantity}} x £{{item.product.price}}</p>
                    </div>
                </div>
                {% endfor %}<hr>
                
                <p class="text-muted">Billing Info :</p>
                <div class="row">
                    <div class="col-8">
                        <p><strong>Order Total</strong></p>
                    </div>
                    <div class="col-4 text-end text-muted">
                        <p>£{{ order.subtotal }}</p> 
                    </div>
                    <div class="col-8">
                        <p><strong>Delivery</strong></p>
                    </div>
                    <div class="col-4 text-end text-muted">
                        <p>£{{ order.delivery_cost }}</p> 
                    </div>
                    <div class="col-8">
                        <p><strong>Grand Total</strong></p>
                    </div>
                    <div class="col-4 text-end text-muted">
                        <p>£{{ order.grand_total }}</p> 
                    </div> 
                </div>
                <hr>
                <!--Address-->
                <p class="text-muted">Delivery Address :</p>
                <div class="row">
                    <div class="col-4">
                        <p><strong>Address Line 1</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.address_line_1 }}</p> 
                    </div>
                    {% if order.shipping_address.address_line2 %}
                    <div class="col-4">
                        <p><strong>Address Line 2</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.address_line_2 }}</p> 
                    </div>
                    {% endif %}  
                    <div class="col-4">
                        <p><strong>Address Line 2</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.address_line_2 }}</p> 
                    </div>
                    <div class="col-4">
                        <p><strong>Town or City</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.town_or_city }}</p> 
                    </div>
                    <div class="col-4">
                        <p ><strong>County</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.county }}</p>
                    </div>
                    <div class="col-4">
                        <p><strong>Post Code</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.post_code }}</p>    
                    </div>
                    <div class="col-4">
                        <p><strong>Country</strong></p>
                    </div>
                    <div class="col-8 text-end text-muted">
                        <p>{{ order.country }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}
